spring.application.name=demo

# ===== 데이터베이스 설정 =====

# MySQL 연결 설정
spring.datasource.url=${SPRING_DATABASE_URL}
spring.datasource.username=${SPRING_DATABASE_USERNAME}
spring.datasource.password=${SPRING_DATABASE_PASSWORD}
spring.datasource.driver-class-name=${SPRING_DATABASE_DRIVER}

# JPA 설정
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT:org.hibernate.dialect.MySQLDialect}
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:mysql}
spring.jpa.open-in-view=${SPRING_JPA_OPEN_IN_VIEW:true}

# 데이터베이스 초기화 설정
spring.sql.init.mode=${SPRING_SQL_INIT_MODE:always}
spring.sql.init.schema-location=${SPRING_SQL_INIT_SCHEMA_LOCATION:classpath:""}
spring.sql.init.data-location=${SPRING_SQL_INIT_DATA_LOCATION:""}

# ===== Redis 설정 (로컬 WSL 이용, AWS Elasticache 사용 시 .env.backend 파일 변경 필요) =====

# Redis 서버 연결 설정
spring.data.redis.host=${SPRING_CACHE_HOST:localhost}
spring.data.redis.port=${SPRING_CACHE_PORT:6379}
spring.data.redis.password=${SPRING_CACHE_PASSWORD:}
spring.data.redis.database=${SPRING_CACHE_DATABASE:0}

# Redis 연결 풀 설정
spring.data.redis.lettuce.pool.max-active=${SPRING_CACHE_POOL_MAX_ACTIVE:8}
spring.data.redis.lettuce.pool.max-idle=${SPRING_CACHE_POOL_MAX_IDLE:8}
spring.data.redis.lettuce.pool.min-idle=${SPRING_CACHE_POOL_MIN_IDLE:0}
spring.data.redis.lettuce.pool.max-wait=${SPRING_CACHE_POOL_MAX_WAIT:-1ms}

# Redis 연결 타임아웃 설정
spring.data.redis.timeout=${SPRING_CACHE_TIMEOUT:2000ms}
spring.data.redis.lettuce.shutdown-timeout=${SPRING_CACHE_SHUTDOWN_TIMEOUT:100ms}

# Spring Session Redis 설정
spring.session.redis.store-type=${SPRING_CACHE_SESSION_STORE_TYPE:redis}
spring.session.redis.namespace=${SPRING_CACHE_SESSION_NAMESPACE:session}
spring.session.redis.flush-mode=${SPRING_CACHE_FLUSH_MODE:on-save}

# Redis 클러스터 설정 (선택사항 - 단일 Redis 서버 사용 시 주석 처리)
# spring.data.redis.cluster.nodes=localhost:6379
# spring.data.redis.cluster.max-redirects=3

# Redis 연결 테스트 설정
spring.data.redis.lettuce.pool.test-on-borrow=${SPRING_CACHE_TEST_ON_BORROW:true}
spring.data.redis.lettuce.pool.test-on-return=${SPRING_CACHE_TEST_ON_RETURN:true}
spring.data.redis.lettuce.pool.test-while-idle=${SPRING_CACHE_TEST_WHILE_IDLE:true}

# ===== Security 설정 =====

# Spring Security 설정
app.security.allowed_origin=${APP_SECURITY_ALLOWED_ORIGIN}
app.security.permit_all_list=${APP_SECURITY_PERMIT_ALL_LIST}
app.security.permit_all_num=${APP_SECURITY_PERMIT_ALL_NUM}
app.security.is_cors=${APP_SECURITY_IS_CORS}


# JWT 설정
spring.jwt.secret=${SPRING_JWT_SECRET:test}
spring.jwt.access_token_expiration=${SPRING_JWT_ACCESS_TOKEN_EXPIRATION:900000}
spring.jwt.refresh_token_expiration=${SPRING_JWT_REFRESH_TOKEN_EXPIRATION:1800000}
